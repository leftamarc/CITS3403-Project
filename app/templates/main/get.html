{% extends "header.html" %}
{% block content %}

<div class="container">
  <div class="row mt-5">
    <div class="col-md-6 d-flex flex-column align-items-start">
        <h1 class="tab-title generate display-4 mb-5">Generate your SteamWrappeds</h1>  
        <div>
            <p>Press "Generate" to view your SteamWrapped. <br><br>
              For big libraries this can take a while (up to 10 minutes or more) as the Steam Web API is quite slow.<br><br>
              Make sure you have your steam account set to public for all account details or we may miss some key account insights.</p>
            <form action="{{ url_for('generate') }}" method="POST" onsubmit="showLoadingPage()">
                <div class="form-group">
                    <label for="steamid" class="bottom-box-text" style="font-weight: bold;">Steam ID</label>
                    <input type="text" class="form-control dark-input" id="steamid" name="steamid" placeholder="Enter your Steam ID" required>
                </div>

                <!-- Flashed messages displayed above the button -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                  {% if messages %}
                    <div class="mt-3">
                      {% for category, message in messages %}
                        <div class="alert alert-{{ category }} p-2" role="alert" style="border-radius: 5px;">
                          {{ message }}
                        </div>
                      {% endfor %}
                    </div>
                  {% endif %}
                {% endwith %}

                <button type="submit" class="btn btn-green mt-3">Generate</button>
            </form>
        </div>
    </div>
    {% include "elements/tutorial.html" %}
</div>

<!-- Loading Screen -->
<div id="loading-overlay" style="display: none">
    <div style="text-align: center;">
        <div class="spinner-border text-light center" role="status" style="width: 3rem; height: 3rem;"></div>
        <p class="mt-3">Generating your SteamWrapped... Please wait.</p>
    </div>
</div>

{% endblock %}